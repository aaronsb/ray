#pragma once

// Utah Teapot - Original Bezier Patch Data
// Created by Martin Newell, University of Utah, 1975
// 32 bicubic Bezier patches, 306 unique control points
//
// This is the classic dataset that launched a thousand renders.
// We're ray-tracing it directly - no tessellation.

#include <array>
#include <cstdint>

namespace teapot {

// Control point coordinates (x, y, z)
// Indexed by patch vertex references below
constexpr float vertices[][3] = {
    // Rim
    {  1.4000,   0.0000,   2.4000 },
    {  1.4000,  -0.7840,   2.4000 },
    {  0.7840,  -1.4000,   2.4000 },
    {  0.0000,  -1.4000,   2.4000 },
    {  1.3375,   0.0000,   2.5312 },
    {  1.3375,  -0.7490,   2.5312 },
    {  0.7490,  -1.3375,   2.5312 },
    {  0.0000,  -1.3375,   2.5312 },
    {  1.4375,   0.0000,   2.5312 },
    {  1.4375,  -0.8050,   2.5312 },
    {  0.8050,  -1.4375,   2.5312 },
    {  0.0000,  -1.4375,   2.5312 },
    {  1.5000,   0.0000,   2.4000 },
    {  1.5000,  -0.8400,   2.4000 },
    {  0.8400,  -1.5000,   2.4000 },
    {  0.0000,  -1.5000,   2.4000 },
    // Body upper
    { -0.7840,  -1.4000,   2.4000 },
    { -1.4000,  -0.7840,   2.4000 },
    { -1.4000,   0.0000,   2.4000 },
    { -0.7490,  -1.3375,   2.5312 },
    { -1.3375,  -0.7490,   2.5312 },
    { -1.3375,   0.0000,   2.5312 },
    { -0.8050,  -1.4375,   2.5312 },
    { -1.4375,  -0.8050,   2.5312 },
    { -1.4375,   0.0000,   2.5312 },
    { -0.8400,  -1.5000,   2.4000 },
    { -1.5000,  -0.8400,   2.4000 },
    { -1.5000,   0.0000,   2.4000 },
    { -1.4000,   0.7840,   2.4000 },
    { -0.7840,   1.4000,   2.4000 },
    {  0.0000,   1.4000,   2.4000 },
    { -1.3375,   0.7490,   2.5312 },
    { -0.7490,   1.3375,   2.5312 },
    {  0.0000,   1.3375,   2.5312 },
    { -1.4375,   0.8050,   2.5312 },
    { -0.8050,   1.4375,   2.5312 },
    {  0.0000,   1.4375,   2.5312 },
    { -1.5000,   0.8400,   2.4000 },
    { -0.8400,   1.5000,   2.4000 },
    {  0.0000,   1.5000,   2.4000 },
    {  0.7840,   1.4000,   2.4000 },
    {  1.4000,   0.7840,   2.4000 },
    {  0.7490,   1.3375,   2.5312 },
    {  1.3375,   0.7490,   2.5312 },
    {  0.8050,   1.4375,   2.5312 },
    {  1.4375,   0.8050,   2.5312 },
    {  0.8400,   1.5000,   2.4000 },
    {  1.5000,   0.8400,   2.4000 },
    // Body
    {  1.7500,   0.0000,   1.8750 },
    {  1.7500,  -0.9800,   1.8750 },
    {  0.9800,  -1.7500,   1.8750 },
    {  0.0000,  -1.7500,   1.8750 },
    {  2.0000,   0.0000,   1.3500 },
    {  2.0000,  -1.1200,   1.3500 },
    {  1.1200,  -2.0000,   1.3500 },
    {  0.0000,  -2.0000,   1.3500 },
    {  2.0000,   0.0000,   0.9000 },
    {  2.0000,  -1.1200,   0.9000 },
    {  1.1200,  -2.0000,   0.9000 },
    {  0.0000,  -2.0000,   0.9000 },
    { -0.9800,  -1.7500,   1.8750 },
    { -1.7500,  -0.9800,   1.8750 },
    { -1.7500,   0.0000,   1.8750 },
    { -1.1200,  -2.0000,   1.3500 },
    { -2.0000,  -1.1200,   1.3500 },
    { -2.0000,   0.0000,   1.3500 },
    { -1.1200,  -2.0000,   0.9000 },
    { -2.0000,  -1.1200,   0.9000 },
    { -2.0000,   0.0000,   0.9000 },
    { -1.7500,   0.9800,   1.8750 },
    { -0.9800,   1.7500,   1.8750 },
    {  0.0000,   1.7500,   1.8750 },
    { -2.0000,   1.1200,   1.3500 },
    { -1.1200,   2.0000,   1.3500 },
    {  0.0000,   2.0000,   1.3500 },
    { -2.0000,   1.1200,   0.9000 },
    { -1.1200,   2.0000,   0.9000 },
    {  0.0000,   2.0000,   0.9000 },
    {  0.9800,   1.7500,   1.8750 },
    {  1.7500,   0.9800,   1.8750 },
    {  1.1200,   2.0000,   1.3500 },
    {  2.0000,   1.1200,   1.3500 },
    {  1.1200,   2.0000,   0.9000 },
    {  2.0000,   1.1200,   0.9000 },
    // Body bottom
    {  2.0000,   0.0000,   0.4500 },
    {  2.0000,  -1.1200,   0.4500 },
    {  1.1200,  -2.0000,   0.4500 },
    {  0.0000,  -2.0000,   0.4500 },
    {  1.5000,   0.0000,   0.2250 },
    {  1.5000,  -0.8400,   0.2250 },
    {  0.8400,  -1.5000,   0.2250 },
    {  0.0000,  -1.5000,   0.2250 },
    {  1.5000,   0.0000,   0.1500 },
    {  1.5000,  -0.8400,   0.1500 },
    {  0.8400,  -1.5000,   0.1500 },
    {  0.0000,  -1.5000,   0.1500 },
    { -1.1200,  -2.0000,   0.4500 },
    { -2.0000,  -1.1200,   0.4500 },
    { -2.0000,   0.0000,   0.4500 },
    { -0.8400,  -1.5000,   0.2250 },
    { -1.5000,  -0.8400,   0.2250 },
    { -1.5000,   0.0000,   0.2250 },
    { -0.8400,  -1.5000,   0.1500 },
    { -1.5000,  -0.8400,   0.1500 },
    { -1.5000,   0.0000,   0.1500 },
    { -2.0000,   1.1200,   0.4500 },
    { -1.1200,   2.0000,   0.4500 },
    {  0.0000,   2.0000,   0.4500 },
    { -1.5000,   0.8400,   0.2250 },
    { -0.8400,   1.5000,   0.2250 },
    {  0.0000,   1.5000,   0.2250 },
    { -1.5000,   0.8400,   0.1500 },
    { -0.8400,   1.5000,   0.1500 },
    {  0.0000,   1.5000,   0.1500 },
    {  1.1200,   2.0000,   0.4500 },
    {  2.0000,   1.1200,   0.4500 },
    {  0.8400,   1.5000,   0.2250 },
    {  1.5000,   0.8400,   0.2250 },
    {  0.8400,   1.5000,   0.1500 },
    {  1.5000,   0.8400,   0.1500 },
    // Lid
    {  0.0000,   0.0000,   3.1500 },
    {  0.0000,  -0.0020,   3.1500 },
    {  0.0020,   0.0000,   3.1500 },
    {  0.0000,   0.0020,   3.1500 },
    {  0.8000,   0.0000,   3.1500 },
    {  0.8000,  -0.4500,   3.1500 },
    {  0.4500,  -0.8000,   3.1500 },
    {  0.0000,  -0.8000,   3.1500 },
    {  0.0000,   0.0000,   2.8500 },
    {  0.2000,   0.0000,   2.7000 },
    {  0.2000,  -0.1120,   2.7000 },
    {  0.1120,  -0.2000,   2.7000 },
    {  0.0000,  -0.2000,   2.7000 },
    { -0.4500,  -0.8000,   3.1500 },
    { -0.8000,  -0.4500,   3.1500 },
    { -0.8000,   0.0000,   3.1500 },
    { -0.1120,  -0.2000,   2.7000 },
    { -0.2000,  -0.1120,   2.7000 },
    { -0.2000,   0.0000,   2.7000 },
    { -0.8000,   0.4500,   3.1500 },
    { -0.4500,   0.8000,   3.1500 },
    {  0.0000,   0.8000,   3.1500 },
    { -0.2000,   0.1120,   2.7000 },
    { -0.1120,   0.2000,   2.7000 },
    {  0.0000,   0.2000,   2.7000 },
    {  0.4500,   0.8000,   3.1500 },
    {  0.8000,   0.4500,   3.1500 },
    {  0.1120,   0.2000,   2.7000 },
    {  0.2000,   0.1120,   2.7000 },
    // Lid edge
    {  0.4000,   0.0000,   2.5500 },
    {  0.4000,  -0.2240,   2.5500 },
    {  0.2240,  -0.4000,   2.5500 },
    {  0.0000,  -0.4000,   2.5500 },
    {  1.3000,   0.0000,   2.5500 },
    {  1.3000,  -0.7280,   2.5500 },
    {  0.7280,  -1.3000,   2.5500 },
    {  0.0000,  -1.3000,   2.5500 },
    {  1.3000,   0.0000,   2.4000 },
    {  1.3000,  -0.7280,   2.4000 },
    {  0.7280,  -1.3000,   2.4000 },
    {  0.0000,  -1.3000,   2.4000 },
    { -0.2240,  -0.4000,   2.5500 },
    { -0.4000,  -0.2240,   2.5500 },
    { -0.4000,   0.0000,   2.5500 },
    { -0.7280,  -1.3000,   2.5500 },
    { -1.3000,  -0.7280,   2.5500 },
    { -1.3000,   0.0000,   2.5500 },
    { -0.7280,  -1.3000,   2.4000 },
    { -1.3000,  -0.7280,   2.4000 },
    { -1.3000,   0.0000,   2.4000 },
    { -0.4000,   0.2240,   2.5500 },
    { -0.2240,   0.4000,   2.5500 },
    {  0.0000,   0.4000,   2.5500 },
    { -1.3000,   0.7280,   2.5500 },
    { -0.7280,   1.3000,   2.5500 },
    {  0.0000,   1.3000,   2.5500 },
    { -1.3000,   0.7280,   2.4000 },
    { -0.7280,   1.3000,   2.4000 },
    {  0.0000,   1.3000,   2.4000 },
    {  0.2240,   0.4000,   2.5500 },
    {  0.4000,   0.2240,   2.5500 },
    {  0.7280,   1.3000,   2.5500 },
    {  1.3000,   0.7280,   2.5500 },
    {  0.7280,   1.3000,   2.4000 },
    {  1.3000,   0.7280,   2.4000 },
    // Spout
    { -1.6000,   0.0000,   2.0250 },
    { -1.6000,  -0.3000,   2.0250 },
    { -1.5000,  -0.3000,   2.2500 },
    { -1.5000,   0.0000,   2.2500 },
    { -2.3000,   0.0000,   2.0250 },
    { -2.3000,  -0.3000,   2.0250 },
    { -2.5000,  -0.3000,   2.2500 },
    { -2.5000,   0.0000,   2.2500 },
    { -2.7000,   0.0000,   2.0250 },
    { -2.7000,  -0.3000,   2.0250 },
    { -3.0000,  -0.3000,   2.2500 },
    { -3.0000,   0.0000,   2.2500 },
    { -2.7000,   0.0000,   1.8000 },
    { -2.7000,  -0.3000,   1.8000 },
    { -3.0000,  -0.3000,   1.8000 },
    { -3.0000,   0.0000,   1.8000 },
    { -1.5000,   0.3000,   2.2500 },
    { -1.6000,   0.3000,   2.0250 },
    { -2.5000,   0.3000,   2.2500 },
    { -2.3000,   0.3000,   2.0250 },
    { -3.0000,   0.3000,   2.2500 },
    { -2.7000,   0.3000,   2.0250 },
    { -3.0000,   0.3000,   1.8000 },
    { -2.7000,   0.3000,   1.8000 },
    // Spout tip
    { -2.7000,   0.0000,   1.5750 },
    { -2.7000,  -0.3000,   1.5750 },
    { -3.0000,  -0.3000,   1.3500 },
    { -3.0000,   0.0000,   1.3500 },
    { -2.5000,   0.0000,   1.1250 },
    { -2.5000,  -0.3000,   1.1250 },
    { -2.6500,  -0.3000,   0.9375 },
    { -2.6500,   0.0000,   0.9375 },
    { -2.0000,   0.0000,   0.9000 },
    { -2.0000,  -0.3000,   0.9000 },
    { -1.9000,  -0.3000,   0.6000 },
    { -1.9000,   0.0000,   0.6000 },
    { -3.0000,   0.3000,   1.3500 },
    { -2.7000,   0.3000,   1.5750 },
    { -2.6500,   0.3000,   0.9375 },
    { -2.5000,   0.3000,   1.1250 },
    { -1.9000,   0.3000,   0.6000 },
    { -2.0000,   0.3000,   0.9000 },
    // Handle
    {  1.7000,   0.0000,   1.4250 },
    {  1.7000,  -0.6600,   1.4250 },
    {  1.7000,  -0.6600,   0.6000 },
    {  1.7000,   0.0000,   0.6000 },
    {  2.6000,   0.0000,   1.4250 },
    {  2.6000,  -0.6600,   1.4250 },
    {  3.1000,  -0.6600,   0.8250 },
    {  3.1000,   0.0000,   0.8250 },
    {  2.3000,   0.0000,   2.1000 },
    {  2.3000,  -0.2500,   2.1000 },
    {  2.4000,  -0.2500,   2.0250 },
    {  2.4000,   0.0000,   2.0250 },
    {  2.7000,   0.0000,   2.4000 },
    {  2.7000,  -0.2500,   2.4000 },
    {  3.3000,  -0.2500,   2.4000 },
    {  3.3000,   0.0000,   2.4000 },
    {  1.7000,   0.6600,   0.6000 },
    {  1.7000,   0.6600,   1.4250 },
    {  3.1000,   0.6600,   0.8250 },
    {  2.6000,   0.6600,   1.4250 },
    {  2.4000,   0.2500,   2.0250 },
    {  2.3000,   0.2500,   2.1000 },
    {  3.3000,   0.2500,   2.4000 },
    {  2.7000,   0.2500,   2.4000 },
    // Handle attachment
    {  2.8000,   0.0000,   2.4750 },
    {  2.8000,  -0.2500,   2.4750 },
    {  3.5250,  -0.2500,   2.4938 },
    {  3.5250,   0.0000,   2.4938 },
    {  2.9000,   0.0000,   2.4750 },
    {  2.9000,  -0.1500,   2.4750 },
    {  3.4500,  -0.1500,   2.5125 },
    {  3.4500,   0.0000,   2.5125 },
    {  2.8000,   0.0000,   2.4000 },
    {  2.8000,  -0.1500,   2.4000 },
    {  3.2000,  -0.1500,   2.4000 },
    {  3.2000,   0.0000,   2.4000 },
    {  3.5250,   0.2500,   2.4938 },
    {  2.8000,   0.2500,   2.4750 },
    {  3.4500,   0.1500,   2.5125 },
    {  2.9000,   0.1500,   2.4750 },
    {  3.2000,   0.1500,   2.4000 },
    {  2.8000,   0.1500,   2.4000 },
    // Bottom
    {  0.0000,   0.0000,   0.0000 },
    {  0.0000,  -0.0020,   0.0000 },
    {  0.0020,   0.0000,   0.0000 },
    {  0.0000,   0.0020,   0.0000 },
    {  1.5000,   0.0000,   0.1500 },
    {  1.5000,  -0.8400,   0.1500 },
    {  0.8400,  -1.5000,   0.1500 },
    {  0.0000,  -1.5000,   0.1500 },
    { -0.8400,  -1.5000,   0.1500 },
    { -1.5000,  -0.8400,   0.1500 },
    { -1.5000,   0.0000,   0.1500 },
    { -1.5000,   0.8400,   0.1500 },
    { -0.8400,   1.5000,   0.1500 },
    {  0.0000,   1.5000,   0.1500 },
    {  0.8400,   1.5000,   0.1500 },
    {  1.5000,   0.8400,   0.1500 },
};

constexpr int numVertices = sizeof(vertices) / sizeof(vertices[0]);

// Each patch is 16 indices into the vertices array (4x4 control points)
// Order: row-major, (0,0) to (3,3) in parameter space
constexpr int patches[][16] = {
    // Rim (4 patches)
    {   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15 },
    {   3,  16,  17,  18,   7,  19,  20,  21,  11,  22,  23,  24,  15,  25,  26,  27 },
    {  18,  28,  29,  30,  21,  31,  32,  33,  24,  34,  35,  36,  27,  37,  38,  39 },
    {  30,  40,  41,   0,  33,  42,  43,   4,  36,  44,  45,   8,  39,  46,  47,  12 },
    // Body (8 patches)
    {  12,  13,  14,  15,  48,  49,  50,  51,  52,  53,  54,  55,  56,  57,  58,  59 },
    {  15,  25,  26,  27,  51,  60,  61,  62,  55,  63,  64,  65,  59,  66,  67,  68 },
    {  27,  37,  38,  39,  62,  69,  70,  71,  65,  72,  73,  74,  68,  75,  76,  77 },
    {  39,  46,  47,  12,  71,  78,  79,  48,  74,  80,  81,  52,  77,  82,  83,  56 },
    {  56,  57,  58,  59,  84,  85,  86,  87,  88,  89,  90,  91,  92,  93,  94,  95 },
    {  59,  66,  67,  68,  87,  96,  97,  98,  91,  99, 100, 101,  95, 102, 103, 104 },
    {  68,  75,  76,  77,  98, 105, 106, 107, 101, 108, 109, 110, 104, 111, 112, 113 },
    {  77,  82,  83,  56, 107, 114, 115,  84, 110, 116, 117,  88, 113, 118, 119,  92 },
    // Lid (8 patches)
    { 120, 120, 120, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132 },
    { 120, 120, 120, 120, 124, 133, 134, 135, 128, 136, 137, 138, 132, 139, 140, 141 },
    { 120, 120, 120, 120, 135, 142, 143, 144, 138, 145, 146, 147, 141, 148, 149, 150 },
    { 120, 120, 120, 120, 144, 151, 152, 121, 147, 153, 154, 125, 150, 155, 156, 129 },
    { 129, 130, 131, 132, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168 },
    { 132, 139, 140, 141, 160, 169, 170, 171, 164, 172, 173, 174, 168, 175, 176, 177 },
    { 141, 148, 149, 150, 171, 178, 179, 180, 174, 181, 182, 183, 177, 184, 185, 186 },
    { 150, 155, 156, 129, 180, 187, 188, 157, 183, 189, 190, 161, 186, 191, 192, 165 },
    // Spout (4 patches)
    { 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208 },
    { 196, 209, 210, 193, 200, 211, 212, 197, 204, 213, 214, 201, 208, 215, 216, 205 },
    { 205, 206, 207, 208, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228 },
    { 208, 215, 216, 205, 220, 229, 230, 217, 224, 231, 232, 221, 228, 233, 234, 225 },
    // Handle (4 patches)
    { 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250 },
    { 238, 251, 252, 235, 242, 253, 254, 239, 246, 255, 256, 243, 250, 257, 258, 247 },
    { 247, 248, 249, 250, 259, 260, 261, 262, 263, 264, 265, 266, 267, 268, 269, 270 },
    { 250, 257, 258, 247, 262, 271, 272, 259, 266, 273, 274, 263, 270, 275, 276, 267 },
    // Bottom (4 patches)
    { 277, 277, 277, 277, 278, 279, 280, 281, 278, 279, 280, 281, 278, 279, 280, 281 },
    { 277, 277, 277, 277, 281, 282, 283, 284, 281, 282, 283, 284, 281, 282, 283, 284 },
    { 277, 277, 277, 277, 284, 285, 286, 287, 284, 285, 286, 287, 284, 285, 286, 287 },
    { 277, 277, 277, 277, 287, 288, 289, 278, 287, 288, 289, 278, 287, 288, 289, 278 },
};

constexpr int numPatches = sizeof(patches) / sizeof(patches[0]);

} // namespace teapot
